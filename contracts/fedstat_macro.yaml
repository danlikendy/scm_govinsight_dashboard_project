source_name: fedstat_macro
owner: rosstat
description: "Статистика Росстата/ЕМИСС (макроэкономические показатели)"
frequency: monthly
endpoint_type: json_api
endpoint: "https://fedstat.ru/api"
auth: none
alternative_endpoints:
  - type: csv_download
    url: "https://gks.ru/storage/mediabank/indicators.csv"
    description: "Прямая загрузка CSV с показателями"

# Схема данных
schema:
  - name: indicator_code
    type: string
    required: true
    description: "Код показателя в ЕМИСС"
  - name: indicator_name
    type: string
    required: true
    description: "Наименование показателя"
  - name: region_code
    type: string
    required: true
    description: "Код региона (ОКАТО)"
  - name: period
    type: date
    required: true
    description: "Период показателя"
  - name: value
    type: decimal
    required: true
    description: "Значение показателя"
  - name: unit
    type: string
    required: true
    description: "Единица измерения"
  - name: indicator_type
    type: string
    required: true
    description: "Тип показателя"
    values: ["production", "employment", "investment", "revenue", "logistics"]
  - name: updated_at
    type: timestamp
    required: true
    description: "Время последнего обновления"

# Правила качества данных
dq_rules:
  - unique: [indicator_code, region_code, period]
  - not_null: [indicator_code, indicator_name, region_code, period, value]
  - range:
      field: value
      min: -999999999999
      max: 999999999999
  - range:
      field: period
      min: "2015-01-01"
      max: "now"

# SLA и мониторинг
sla:
  availability: 0.90
  freshness_hours: 168  # неделя
  max_response_time_seconds: 45

# Метрики для мониторинга
metrics:
  - name: production_index
    formula: "AVG(CASE WHEN indicator_type = 'production' THEN value END)"
    description: "Индекс производства"
  - name: employment_rate
    formula: "AVG(CASE WHEN indicator_type = 'employment' THEN value END)"
    description: "Уровень занятости"

# Контактная информация
contact:
  owner: "Росстат"
  email: "info@gks.ru"
  phone: "+7 (495) 607-40-00"
  documentation_url: "https://fedstat.ru/docs"

# Технические детали API
parsing:
  method: "json_api"
  pagination:
    type: "offset_limit"
    limit: 1000
  data_extraction:
    indicator_code: "indicator.id"
    indicator_name: "indicator.name"
    region_code: "region.code"
    period: "period"
    value: "value"
    unit: "unit"
