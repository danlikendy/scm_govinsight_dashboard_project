# SCM Government Insight Dashboard

Аналитическая платформа для мониторинга внедрений SCM-ПО, доли отечественных решений и эффективности мер господдержки

## Цель проекта

Дать государственным стейкхолдерам, вендорам и интеграторам прозрачную, replicable-аналитику по:
- Динамике внедрений SCM-ПО
- Доле отечественных решений в установочной базе  
- Эффективности мер господдержки через ROI, окупаемость, косвенный макроэффект

## Архитектура

- **Хранилище**: PostgreSQL + витрины (звёздная схема)
- **Оркестрация**: Apache Airflow
- **Визуализация**: Streamlit (MVP) + Power BI (prod)
- **Качество данных**: Great Expectations
- **ML/Аналитика**: statsmodels, causalml, linearmodels
- **Мониторинг**: Prometheus + Grafana

## Структура проекта

```
/local_app.py   # Основное приложение Streamlit
/data_sources.py # Коннекторы для парсинга данных
/requirements.txt # Python зависимости
/run_app.sh     # Скрипт запуска
/.streamlit/    # Конфигурация Streamlit
```

## Быстрый старт

### 1. Локальный запуск (рекомендуется)

```bash
# Активация виртуального окружения
source venv/bin/activate

# Запуск приложения
streamlit run local_app.py --server.port 8501
```

Или используйте скрипт:

```bash
# Запуск через скрипт
./run_app.sh
```

**Доступ:** http://localhost:8501

### 2. Доступ к приложению

- **Streamlit Dashboard**: http://localhost:8501

## KPI и метрики

| Метрика | Описание | Формула |
|---------|----------|---------|
| **impl_count** | Количество внедрений | `∑1{status∈['go-live','pilot_ok'] ∧ date_go_live∈t}` |
| **domestic_share** | Доля отечественного ПО (%) | `installs_domestic(t) / installs_all(t) × 100` |
| **support_coverage** | Охват господдержкой (%) | `impl_with_support(t) / impl_all(t) × 100` |
| **ROI** | Рентабельность (3/5 лет) | `(∑effects - grant_cost) / grant_cost × 100` |
| **ISI** | Индекс импортозамещения | `w₁×domestic_share + w₂×local_components + w₃×R&D_share` |

## Источники данных

| Источник | Тип | Частота | Описание |
|----------|-----|---------|----------|
| **Реестр ПО** | HTML парсинг | Ежемесячно | Единый реестр российского ПО (Минцифры) |
| **ЕИС** | CSV загрузка | Ежедневно | Госзакупки 44-ФЗ/223-ФЗ |
| **ЕМИСС** | JSON API | Ежемесячно | Статистика Росстата |
| **ГИСП** | Документы | Ежемесячно | Меры промышленной поддержки |
| **Опросы** | Формы/S3 | По событию | Отчётность компаний |

## Методология оценки эффекта

### Difference-in-Differences (DID)
- **Treatment**: внедрения с поддержкой
- **Control**: сопоставимые внедрения без поддержки
- **Балансировка**: PSM по размеру, отрасли, региону

### Propensity Score Matching (PSM)
- Матчинг по ковариатам: размер компании, отрасль, выручка, регион
- Оценка ΔΔ по KPI: lead time, оборот запасов, штрафы, маржинальность

### Synthetic Control Method (SCM)
- Формирование синтетического "контроля" из не получавших поддержку
- Верификация устойчивости через placebo-тесты

## Дашборд страницы

1. **Executive Overview** - KPI-карточки, тренды, heatmap по регионам
2. **Доля отечественного ПО** - разрезы по отрасли, региону, классу SCM
3. **Эффективность поддержки** - DID-карты, ROI по программам
4. **Рынок и конкуренция** - доли вендоров, средние чеки, "горячие" сегменты
5. **Сценарии (What-if)** - ползунки бюджета, пересчёт метрик
6. **DataOps** - статус DAG'ов, качество данных, алерты

## Разработка

### Установка зависимостей

```bash
# Python зависимости
pip install -r requirements.txt
```

### Запуск в режиме разработки

```bash
# Streamlit
streamlit run local_app.py --server.port 8501
```

## Поддержка

- **Документация**: README.md
- **Issues**: GitHub Issues

---

**Статус**: Production Ready | **Версия**: 1.0.0 | **Последнее обновление**: 2024-01-15
